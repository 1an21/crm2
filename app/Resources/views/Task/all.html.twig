{% extends '::base.html.twig'  %}

{% block body %}
    {% if app.user != null %}
        <div style="height: 45px;">
            <a href="{{ path('create')}}" class="btn btn-light btn-sm" style="font-size: 16px;">Add task +</a>
            <a href="{{ path('gets')}}" class="btn btn-light btn-sm" style="font-size: 16px;">My tasks</a>
            <a href="{{ path('daily')}}" class="btn-sm" style="color: #49b965; font-size: 16px;" >Daily tasks</a>
            <a href="{{ path('wiki')}}" class="btn-sm" style="color: #8a9ad6; font-size: 16px;" >Wiki</a>
        </div>
    <div>
<div class="mob">
            <div class="todo">
                <h2>To do</h2>
                {% for task in tasks %}
                    <a href="{{ path('view', { 'id': task.id }) }}">

                <div draggable="true" class="card">
                    {% if task.priority %}
                        <div class="{{ task.priority.title }}"></div>
                     {% else %}
                         <div></div>
                    {% endif %}
                    <p class="title-card">{{ task.title }}</p>
                    {% if task.project %}
                        <p class="name-hours">    {{ task.project.title }}</p>

                    {% endif %}
                    {% if task.user %}
                    <p class="hours">    {{ task.user.name }}</p>
                    {% endif %}
                    <p class="clearfix my-line"></p>
                    <p class="button-card">
                        <a href="{{ path('edit', { 'id': task.id }) }}" id="start-task" style="
                            text-align: right;
                            display: block;
                            margin-right: 20px;">
                            <img src="/images/start.png">
                        </a>

                    </p>
                </div>
                    </a>
                {% endfor %}
            </div>

     <div class="inprogress">
        <h2>in Progress</h2>
        {% for intask in inprogress %}
         <a href="{{ path('view', { 'id': intask.id }) }}">

            <div class="progress-card ">
                <div class="{{ intask.priority }}"></div>
                <p class="title-card">{{ intask.title }}</p>
                <p class="name-hours">{{ intask.project }}</p>
                <p class="hours">{{ intask.user }}</p>
                <p class="clearfix my-line"></p>
                <div class="button-card">
                    <p class="new-hours">{{ intask.dateFinished|time_diff(intask.dateStarted) }}
                    </p>
                    {% if intask.dateS is null %}
                    <a href="{{ path('pause', { 'id': intask.id }) }}" id="pause-task"><img src="/images/2-layers.png"></a>
                    {% endif %}
                    {% if intask.dateF is null and intask.dateS is not empty %}
                    <a href="{{ path('pause-end', { 'id': intask.id }) }}" id="pause-end-task" style="border: 2px solid #8a9ad6;
    padding: 1px 1px;">Pause end</a>
                    {% endif %}
                    <a href="{{ path('delay', { 'id': intask.id }) }}" id="delay-task" style="border: 2px solid #8a9ad6;
    padding: 1px 1px;">Delay</a>
                    <a href="{{ path('finish', { 'id': intask.id }) }}" id="finish-task" style="
                            float: right;
                            display: block;
                            margin-right: 10px;">
                        <img src="/images/finish.png"></a>
                </div>
            </div>
         </a>

        {% endfor %}
     </div>
</div>
     <div class="done">
         <h2>Done</h2>
          {% for donetask in donetasks %}
         <a href="{{ path('view', { 'id': donetask.id }) }}">
              {% if donetask.priority %}
             <div class="done-card {{ donetask.priority.title }}">
                 {% else %}
                 <div class="done-card">
                 {% endif %}
                    <p class="title-card">{{ donetask.title }}</p>

                        <p class="name-hours">    {{ donetask.project}}</p>

                        <p class="hours">    {{ donetask.user }}</p>

                     <p class="clearfix my-line"></p>
                     <div class="button-card">

                         <p class="new-hours-done">{{ donetask.diff }}
                         </p>
                     </div>

                </div>
         </a>

          {% endfor %}
     </div>

        <div class="delay">
            <h2>Delay</h2>
            {% for delaytask in delaytasks %}
            <a href="{{ path('view', { 'id': delaytask.id }) }}">
                {% if delaytask.priority %}
                    <div class="delay-card {{ delaytask.priority.title }}">
                        {% else %}
                        <div class="delay-card">
                        {% endif %}
                    <p class="title-card">{{ delaytask.title }}</p>
                    {% if delaytask.project %}
                        <p class="name-hours">    {{ delaytask.project.title }}</p>
                    {% endif %}
                    {% if delaytask.user %}
                        <p class="hours">    {{ delaytask.user.name }}</p>
                    {% endif %}
                            <p class="clearfix my-line"></p>
                            <div class="button-card">
                                <p class="new-hours-delay">{{ delaytask.dateFinished|time_diff(delaytask.dateStarted) }}
                                </p>
                            </div>
                </div>
            </a>

            {% endfor %}
        </div>

    </div>
    <div class="navigation text-center">
    {{ knp_pagination_render(tasks) }}
    </div>
    {% endif %}
    {% if app.user == null %}
        <div style="text-align:center;"><a href="/login" class="btn btn-info" style="text-align:center;"> Login</a>
            <a href="/register" class="btn btn-info" style="text-align:center;"> Register</a>
        </div>
    {% endif %}
{% endblock %}